webpackJsonp([1],{"6RC4":function(e,t){},E2j6:function(e,t){},IdEK:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},a,!1,function(e){n("gqJV")},null,null).exports,r=n("/ocq"),l={data:function(){return{activeIndex:"",events:[]}},mounted:function(){this.activeIndex=sessionStorage.getItem("cronKeyPath")||"/cron/schedule"},watch:{activeIndex:function(e){e!=this.$route.path&&(this.activeIndex=this.$route.path)}},methods:{handleSelect:function(e,t){sessionStorage.setItem("cronKeyPath",e)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",{staticStyle:{padding:"0"}},[n("el-row",[n("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal",router:""},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"/cron/schedule"}},[e._v(" Schedule ")]),e._v(" "),n("el-menu-item",{attrs:{index:"/cron/running"}},[e._v(" Running ")]),e._v(" "),n("el-menu-item",{attrs:{index:"/cron/dashboard",disabled:"true"}},[e._v(" Dashboard ")])],1)],1)],1),e._v(" "),n("el-main",[n("router-view")],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(l,i,!1,function(e){n("6RC4")},"data-v-1c0bf224",null).exports,u=n("mtWM").a.create({baseURL:"http://localhost:8080",timeout:5e3});function d(){return u({url:"/api/v1/jobs",method:"get"})}var f={data:function(){return{events:[],jobs:[],activeIndex:"/schedule",search:"",dialogFormVisible:!1,options:[],loading:!1,addForm:{job:"",spec:""}}},created:function(){this.fetchSchedule(),this.fetchJobs()},methods:{fetchSchedule:function(){var e=this;u({url:"/api/v1/schedule",method:"get"}).then(function(t){e.events=t.data})},fetchJobs:function(){var e=this;d().then(function(t){e.jobs=t.data})},toggleJobStatus:function(e){var t,n=this;e.displayed?(t=e.name,u({url:"/api/v1/active",method:"get",params:{job:t}})).catch(function(t){e.displayed=!1,n.$message.warning(t)}):function(e){return u({url:"/api/v1/pause",method:"get",params:{job:e}})}(e.name).catch(function(t){e.displayed=!0,n.$message.warning(t)})},removeJob:function(e,t){var n=this;this.$confirm("This will permanently delete the job "+t.name+", continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"cancel",type:"warning"}).then(function(){var o;(o=t.name,u({url:"/api/v1/remove",method:"get",params:{job:o}})).then(function(){n.events.splice(e,1),n.$message.success("Delete completed")}).catch(function(e){n.$message.warning(e)})}).catch(function(){})},execute:function(e){var t=this;this.$confirm("This will immediately run the job "+e.name+", continue?","Info",{confirmButtonText:"OK",cancelButtonText:"cancel",type:"info"}).then(function(){var n;(n=e.name,u({url:"/api/v1/execute",method:"get",params:{job:n}})).then(function(){t.$message.success("Run completed")}).catch(function(e){t.$message.warning(e)})}).catch(function(){})},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.options=t.jobs.filter(function(n){return t.isSubString(n,e)})},200)):this.options=[]},isSubString:function(e,t){return!t||e.toLowerCase().includes(t.toLowerCase())},onSubmit:function(){var e,t,n=this;this.dialogFormVisible=!1,(e=this.addForm.spec,t=this.addForm.job,u({url:"/api/v1/add",method:"get",params:{spec:e,job:t}})).then(function(){n.$message.success("add completed"),n.fetchSchedule()}).catch(function(e){n.$message.warning(e)})}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:8,offset:8}}},[n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"Type to search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[n("el-button",{staticStyle:{color:"#409EFF"},attrs:{slot:"append",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogFormVisible=!0}},slot:"append"})],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"Add job schedule",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{attrs:{model:e.addForm,"label-width":"50px"}},[n("el-form-item",{attrs:{label:"Job"}},[n("el-select",{staticStyle:{display:"block"},attrs:{filterable:"",remote:"",placeholder:"Please enter a job","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.addForm.job,callback:function(t){e.$set(e.addForm,"job",t)},expression:"addForm.job"}},e._l(e.options,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"Spec"}},[n("el-input",{attrs:{autocomplete:"off",placeholder:"@every 30s"},model:{value:e.addForm.spec,callback:function(t){e.$set(e.addForm,"spec",t)},expression:"addForm.spec"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("cancel")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("confirm")])],1)],1)],1),e._v(" "),n("el-main",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:8,offset:8}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.events.filter(function(t){return e.isSubString(t.name,e.search)}),stripe:""}},[n("template",{slot:"empty"},[n("el-empty",{attrs:{"image-size":100,description:"No Data"}})],1),e._v(" "),n("el-table-column",{attrs:{label:"Job",prop:"name",width:"100%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{staticStyle:{color:"#409EFF"},attrs:{to:{path:"/cron/history",query:{job:t.row.name}}}},[e._v("\n                "+e._s(t.row.name)+"\n              ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Next Execution",prop:"next",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"Spec",prop:"spec"}}),e._v(" "),n("el-table-column",{attrs:{label:"Status",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.toggleJobStatus(t.row)}},model:{value:t.row.displayed,callback:function(n){e.$set(t.row,"displayed",n)},expression:"scope.row.displayed"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Actions",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-video-play",type:"primary"},on:{click:function(n){return e.execute(t.row)}}}),e._v(" "),n("el-button",{attrs:{plain:"",size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(n){return e.removeJob(t.$index,t.row)}}})]}}])})],2)],1)],1)],1)],1)},staticRenderFns:[]},m=n("VU/8")(f,p,!1,null,null,null).exports,h={data:function(){return{executions:[]}},created:function(){this.fetchRunning()},methods:{fetchRunning:function(){var e=this;u({url:"/api/v1/running",method:"get"}).then(function(t){e.executions=t.data})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:8,offset:8}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.executions,stripe:""}},[n("template",{slot:"empty"},[n("el-empty",{attrs:{"image-size":100,description:"No Data"}})],1),e._v(" "),n("el-table-column",{attrs:{label:"Id",prop:"id","show-overflow-tooltip":!0}}),e._v(" "),n("el-table-column",{attrs:{label:"Job",prop:"name",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{staticStyle:{color:"#409EFF"},attrs:{to:{path:"/cron/history",query:{job:t.row.name}}}},[e._v("\n                "+e._s(t.row.name)+"\n              ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"StartedAt",prop:"started_at",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"Node",prop:"node","show-overflow-tooltip":!0}})],2)],1)],1)],1)],1)},staticRenderFns:[]},v=n("VU/8")(h,b,!1,null,null,null).exports,g={data:function(){return{jobs:[]}},created:function(){this.fetchJobs()},methods:{fetchJobs:function(){var e=this;d().then(function(t){e.jobs=t.data,console.log(d)})}}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-main",[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:8,offset:8}}})],1)],1)],1)},staticRenderFns:[]};var y=n("VU/8")(g,_,!1,function(e){n("E2j6")},null,null).exports,w={data:function(){return{executions:[]}},created:function(){var e=this.$route.query.job;this.fetchHistory(e)},methods:{fetchHistory:function(e){var t=this;(function(e){return u({url:"/api/v1/history",method:"get",params:{job:e}})})(e).then(function(e){t.executions=e.data})}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:18,offset:3},lg:{span:14,offset:5},xl:{span:8,offset:8}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.executions,stripe:""}},[n("template",{slot:"empty"},[n("el-empty",{attrs:{"image-size":100,description:"No Data"}})],1),e._v(" "),n("el-table-column",{attrs:{label:"Id",prop:"id","show-overflow-tooltip":!0}}),e._v(" "),n("el-table-column",{attrs:{label:"StartedAt",prop:"started_at"}}),e._v(" "),n("el-table-column",{attrs:{label:"FinisheddAt",prop:"finished_at"}}),e._v(" "),n("el-table-column",{attrs:{label:"Node",prop:"node","show-overflow-tooltip":!0}}),e._v(" "),n("el-table-column",{attrs:{label:"Status",prop:"status",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[!0===e.row.success?n("span",[n("i",{staticClass:"el-icon-success",staticStyle:{color:"green","font-size":"1.5rem"}})]):n("span",[n("i",{staticClass:"el-icon-error",staticStyle:{color:"red","font-size":"1.5rem"}})])]}}])}),e._v(" "),n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form",{attrs:{"label-position":"left",inline:""}},[n("el-form-item",{attrs:{label:"output"}},[n("span",[e._v(e._s(t.row.output)+" ")])])],1)]}}])})],2)],1)],1)],1)],1)},staticRenderFns:[]};var S=n("VU/8")(w,x,!1,function(e){n("IdEK")},null,null).exports;o.default.use(r.a);var F=new r.a({routes:[{path:"/",name:"Cron",component:c,children:[{path:"/cron/schedule",name:"Schedule",component:m},{path:"/cron/running",name:"Running",component:v},{path:"/cron/dashboard",name:"Dashboard",component:y},{path:"/cron/history",name:"History",component:S}]}]}),j=n("zL8q"),$=n.n(j);n("tvR6");o.default.config.productionTip=!1,o.default.use($.a),new o.default({el:"#app",router:F,render:function(e){return e(s)}})},gqJV:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bd8a575fd72c111480b7.js.map